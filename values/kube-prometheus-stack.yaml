fullnameOverride: kube-prometheus-stack

prometheusOperator:
  admissionWebhooks:
    enabled: true

prometheus:
  prometheusSpec:
    retention: 15d
    scrapeInterval: 30s
    evaluationInterval: 30s
    enableAdminAPI: false
    # resource tuning (edit as needed)
    resources:
      requests:
        cpu: 200m
        memory: 1Gi
      limits:
        memory: 4Gi
  additionalDataSources:
    - name: Loki
      type: loki
      url: http://loki-gateway.monitoring.svc.cluster.local
      access: proxy
      # Even with auth_enabled: false, Loki requires an org ID header
      # This is a known quirk - the value can be anything since auth is disabled
      jsonData:
        httpHeaderName1: "X-Scope-OrgID"
      secureJsonData:
        httpHeaderValue1: "fake"

alertmanager:
  enabled: true

grafana:
  enabled: true

defaultRules:
  create: true

kubelet:
  serviceMonitor:
    https: true
