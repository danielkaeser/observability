apiVersion: apisix.apache.org/v2
kind: ApisixPluginConfig
metadata:
  name: my-oidc-authcode
spec:
  plugins:
    - name: openid-connect
      enable: true
      config:
        discovery: "https://auth.danielkaeser2026.de/realms/demo/.well-known/openid-configuration"
        client_id: "demo-client"
        client_secret: "zM49oW3Hctx75oSPbyVCkMSDAnFT8u3z"
        bearer_only: false
        #redirect_uri: "/anything/callback"
        #redirect_uri: "https://prometheus.danielkaeser2026.de/anything/callback"
        scope: "openid profile email"
        session:
          secret: "someNiceRandomSessionSecretWurstbrot123"
        # optional but often useful:
        set_access_token_header: true
        #set_refresh_token_header: true
        access_token_in_authorization_header: true
        set_userinfo_header: true
        use_pkce: true
        # unauth_action: "auth"
